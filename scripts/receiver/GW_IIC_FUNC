#!/bin/bash

IO_SELECT=/sys/devices/platform/i2c/io_select
IO_VALUE=/sys/devices/platform/i2c/io_value
I_RANGE=/sys/devices/platform/i2c/i_range


CEC_SUCESS=0
CEC_SUCESS_ACK=1
CEC_SUCESS_NACK=2
CEC_SEND_FAIL=100
CEC_STATE_BUSY=1
CEC_STATE_IDLE=0

FUNC_TYPE_OFFSET=0x10
SET_ARGS_OFFSET=0x20
AUDDLY_READ_OFST=0x30
CEC_RDY_TOSEND=0x40
CEC_RDY_TOREAD=0x41
CEC_READ_BYTES=0x43
CEC_READ_ACK=0x44
CEC_READ_LAST_ERR=0x45
CEC_READ_DATA_LENG=0x46
CEC_READ_LOGI_ADDR=0x47
CEC_READ_TV_ADDR=0x48
IIC_NONE_OF_FUNC=0
AUD_SLOWER=1
AUD_SLW_VAL=2
AUD_FASTER=5
AUD_FAST_VAL=6
AUD_SET_VAL=9
AUD_SAVE_VAL=0xa
AUD_RESTORE_VAL=0xb
AUD_READ_CURRENT=0xc
CEC_SEND=0x1d
CEC_WATCH=0x1f
CEC_READ=0x42
CEC_TV_ON=0x63
CEC_TV_OFF=0x64
VOL_BTH_DOWN=0x80
VOL_R_DOWN=0x81
VOL_L_DOWN=0x82
VOL_BTH_UP=0x83
VOL_R_UP=0x84
VOL_L_UP=0x85
VOL_BTH_SET=0x86
VOL_R_SET=0x87
VOL_L_SET=0x88
VOL_MUTE=0x89
VOL_UNMUTE=0x8A
VOL_READ=0x8B
VOL_READ_BYTES=0x8C
VOL_CTRL_EXIST=0x8F
DD_BASS_ON=0x90  
DD_BASS_MUTE=0x91 
DD_RESET=0x70
DD_MIC_ON=0x72
DD_MIC_MUTE=0x73
DD_MIC_VAL=0x74
DD_LINE_ON=0x75
DD_LINE_MUTE=0x76
DD_MAIN_MUTE=0x77
DD_MAIN_ON=0x78
DD_SCAN_ON=0x79
DD_SCAN_OFF=0x7A
DD_MIC_SIG=0x7B
DD_LINE_SIG=0x7C
DD_MIC_PLUG=0x7D
DD_LINE_PLUG=0x7E
DD_EXIST=0x7F
_4SCR_HEAD_PORT=0xB0
_4SCR_FOCUS_CHNNL=0xB1
_4SCR_LAYOUT=0xB2
_4SCR_STOP_OUTPUT=0xB3
_4SCR_RESTART_OUTPUT=0xB4
_4SCR_WRITE_REG=0xB5
_4SCR_READ_REG=0xB6
_4SCR_READ_REG_ARG=0xB7  
_4SCR_FOCUS_ONOFF=0xBA


_4SCR_CUSTM_LAYOUT=0xBB
HWIDTH=0x01
VHEIGHT=0x02
VSTART=0x03 
HSTART=0x04

FADE=0x05
DONE=0xff




DD_ERASE_SIZE=0x85
DD_PRG=0x86
DD_CHK_STS=0x87

MPU_VERSION_READ=0xA0
MPU_VERSION_READ_BYTES=0xA1
IIC_STATMNT_FIN=0xF5


ten_2_hex_04 ()
{
	arg1=$(echo $1 | awk '{printf "%04x",$1}')
	arg1=$(echo $arg1 | awk '{print substr($1,length($1)-3)}')
  echo $arg1
}

ten_2_hex ()
{
  arg1=$(echo $1 | awk '{printf "%x",$1}')
  echo $arg1
}

hex_2_ten ()
{
  arg2=$(printf '%d\n' 0x$1)
  printf $arg2
}

CEC_BUS_STATE ()
{
  echo $CEC_RDY_TOSEND 0x1 > $I_RANGE
  arg=$(cat $IO_VALUE  | tail -n 1 |awk '{print $2}')
  if [ $arg -eq $CEC_STATE_IDLE ]; then
   echo '0'
  else
   echo '1'
  fi
}